{"mappings":"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","sources":["src/js/index.js"],"sourcesContent":["import { TezosToolkit } from \"@taquito/taquito\";\nimport { BeaconWallet } from \"@taquito/beacon-wallet\";\nimport { TezosOperationType } from \"@airgap/beacon-sdk\";\n\nconst Tezos = new TezosToolkit(rpc_addr);\nconst Wallet = new BeaconWallet({ name: \"Tezos Haiku\" });\nTezos.setWalletProvider(Wallet);\n\nTezos.contract.at(contract_addr)\n  .then(contract => {\n    return contract.storage()\n      .then(storage => {\n        assign_data(storage)\n        check_wallet()\n        document.getElementById('sort_container').style.display = ''\n        data_loaded = true\n        main_start()\n      })\n  })\n  .catch(error => console.log(`Error: ${JSON.stringify(error, null, 2)}`));\n\ncheck_wallet = async () => {\n  const activeAccount = await Wallet.client.getActiveAccount();\n  if (!activeAccount) {\n    document.getElementById('buttons_preview').innerHTML += '<a class=\"btn btn_primary right_down_space\" onclick=\"connect_wallet()\">Connect wallet</a>'\n  } else {\n    user_addr = activeAccount.address;\n  }\n}\n\nconnect_wallet = async () => {\n  const activeAccount = await Wallet.client.getActiveAccount();\n  if (!activeAccount) {\n    const permissions = await Wallet.client.requestPermissions({\n      network: {\n        type: network,\n        rpcUrl: rpc_addr,\n      },\n    });\n    user_addr = permissions.address;\n  } else {\n    user_addr = activeAccount.address;\n  }\n\n  document.getElementById('buttons_preview').lastChild.remove()\n}\n\ndisconnect_wallet = async () => await Wallet.clearActiveAccount()\n\nconst assign_data = (storage) => {\n  data.tokens = []\n  data.owners = []\n\n  for (const [s_key, value] of storage.ledger.valueMap) {\n    const key = JSON.parse(s_key)\n    value.token_id = Number(key[1])\n    value.owner = key[0]\n    value.count = Number(value.count)\n    value.for_sale = Number(value.for_sale)\n    value.price = Number(value.price)\n    data.owners.push(value)\n  }\n  for (const [key, value] of storage.token.valueMap) {\n    value.id = Number(key.slice(1, -1))\n    value.amount = Number(value.amount)\n    value.state = Number(value.state)\n    value.cnfrm_at = new Date(value.cnfrm_at)\n    value.crted_at = new Date(value.crted_at)\n    value.text_color = Number(value.text_color)\n    const c_t = { b: value.text_color % 256 }\n    c_t.g = (value.text_color - c_t.b) / 256 % 256\n    c_t.r = ((value.text_color - c_t.b) / 256 - c_t.g) / 256 % 256\n    value.back_color = Number(value.back_color)\n    const c_b = { b: value.back_color % 256 }\n    c_b.g = (value.back_color - c_b.b) / 256 % 256\n    c_b.r = ((value.back_color - c_b.b) / 256 - c_b.g) / 256 % 256\n    value.image = `<svg class=\"\" width=\"338px\" height=\"225px\" role=\"img\" focusable=\"false\">\n      <rect width=\"100%\" height=\"100%\" fill=\"rgb(${c_b.r},${c_b.g},${c_b.b})\" rx=\"0.25rem\" ry=\"0.25rem\"></rect>\n      <text y=\"20%\" fill=\"white\" font-size=\"1.2em\">\n        ${value.content.split('\\n').reduce((a, c) => a + `<tspan x=\"10%\" dy=\"1.6em\" fill=\"rgb(${c_t.r},${c_t.g},${c_t.b})\">${c}</tspan>`, \"\")}\n      </text>\n    </svg>`\n\n    value.min_price = data.owners.filter(c => c.token_id == value.id).reduce((a, c) => a > c.price && c.for_sale > 0 ? c.price : a, Infinity)\n    value.owners_amount = data.owners.filter(c => c.token_id == value.id).length\n    data.tokens.push(value)\n  }\n}\n\nconst main_start = (sort = (a, b) => b.cnfrm_at - a.cnfrm_at) => {\n  if (!dom_loaded || !data_loaded) return\n\n  console.log(data.tokens)\n  console.log(data.owners)\n\n  document.getElementById(\"tokens\").innerHTML = ''\n  for (const t of data.tokens.filter(c => c.state == 1).sort(sort)) {\n    document.getElementById(\"tokens\").innerHTML += `<div class=\"card token\" onclick=\"buy_open(${t.id})\">\n      ${t.image}\n      <div class=\"card-body\">\n        <p class=\"card-text\">Haiku #${t.id} written by <a style=\"font-family:monospace; font-size: initial;\">${t.creator}</a></p>\n        <b class=\"card-text\">${t.min_price !== Infinity ? `Price starts from <a style=\"font-family:monospace;\">${t.min_price / 1000000}tz</a>` : `Not for sale :(`}</b>\n        <p></p>\n        <div class=\"d-flex justify-content-between align-items-center\">\n          <button type=\"button\" id=\"buy_button-${t.id}\" class=\"btn btn-sm btn-outline-secondary buy_button\">More</button>\n          <small class=\"text-muted\">${t.cnfrm_at.toGMTString().split(', ')[1].slice(0, -7)}</small>\n        </div>\n      </div>\n    </div>`\n  }\n}\n\nbuy_open = async (id) => {\n  const t = data.tokens[id]\n  data.buy_cache = data.owners.filter(c => c.token_id == t.id && c.for_sale > 0).filter(c => c.owner != user_addr).sort((a, b) => a.price - b.price)\n  const max_amount = data.buy_cache.reduce((a, c) => a + +c.for_sale, 0)\n  document.getElementById('buy_popup').innerHTML = `<section id=\"buy_popup_overlay\" class=\"overlay__\">\n    <div class=\"container__\">\n      <h1 class=\"fw-light buy_header\">Buy Haiku #${t.id}</h1>\n      <div class=\"card token buy_image\">\n        ${t.image}\n      </div>\n      <div class=\"buy_body\">\n        <div class=\"card buy_card\">Creator: ${t.creator == user_addr ? `<a class=\"alien\" href=\"${account_link}\" target=\"_blank\">you</a>` : `<a class=\"alien\" href=\"${alien_link}?address=${t.creator}\" target=\"_blank\">${t.creator.slice(0, 7)}...${t.creator.slice(-7)}</a>`}</div>\n        <div class=\"card buy_card\">Created at: ${t.crted_at.toGMTString().split(', ')[1]}</div>\n        <div class=\"card buy_card\">Total supply: ${t.amount}</div>\n        ${user_addr ? `<div class=\"card buy_card\">You own: ${data.owners.filter(c => c.owner == user_addr && c.token_id == t.id).reduce((a, c) => a + c.count, 0)}</div>` : \"\"}\n        ${data.buy_cache.length ? `\n          <div class=\"buy_inputs\">\n            <label for=\"buy_amount\" class=\"buy_label\">Choose how many items you want to buy</label>\n            <input type=\"range\" class=\"form_range\" min=\"1\" max=\"${max_amount}\" value=\"1\" step=\"1\" id=\"buy_amount\">\n          </div>\n          <div class=\"card buy_card\" id=\"buy_samt\">Selected amount: 1${1 == max_amount ? '(max)' : ''}</div>\n          <div class=\"card buy_card\" id=\"buy_cost\">Total price: ${data.buy_cache[0].price / 1000000}tz</div>\n          <p class=\"buy_note\">Note: each item of haiku has its own price. But our alghorithm include the cheapest ones in the total price, so you shouldn't worry if price of five items is bigger than price of the first multiplied by five.</p>\n        `: ''}\n        <div class=\"btn-group buy_btn_group\" role=\"group\">\n          <button type=\"button\" onclick=\"buy_close()\" class=\"btn btn_secondary buy_cfrm_button\">CANCEL</button>\n          ${data.buy_cache.length && user_addr ? `<button type=\"button\" id=\"buy_cfrm-${id}\" class=\"btn btn_primary buy_cfrm_button\">BUY</button>` : `<button type=\"button\" id=\"buy_cfrm-${id}\" class=\"btn btn_primary buy_cfrm_button\" disabled>BUY</button>`}\n        </div>\n        <p class=\"buy_note\" id=\"note_result\">${!user_addr ? 'Please, connect your wallet to buy haikus' : ''}</p>\n      </div>\n    </div>\n  </section>`\n}\nbuy_close = () => {\n  document.getElementById('buy_popup').innerHTML = ''\n  data.buy_cache = undefined\n}\n\nconst token_buy = async (id, pay, sellers) => {\n  document.getElementById(`buy_cfrm-${id}`).disabled = true\n  document.getElementById('note_result').innerHTML = 'Please, confirm transaction in your wallet'\n  contract = contract ? contract : await Tezos.wallet.at(contract_addr);\n  try {\n    const result = await contract.methods.token_buy(Number(id), sellers).send({ amount: pay, mutez: true });\n    document.getElementById('note_result').innerHTML = 'Your request is in work. Wait some and update page to view changes.'\n  } catch (error) {\n    if (error.title == 'Aborted') {\n      document.getElementById('note_result').innerHTML = 'Please, try again and confirm transaction in your wallet'\n      document.getElementById(`buy_cfrm-${id}`).disabled = false\n    } else {\n      document.getElementById('note_result').innerHTML = 'Something went wrong, please update page and try again'\n    }\n    console.log(`The contract call failed and the following error was returned:`, error);\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => { dom_loaded = true; main_start() })\ndocument.addEventListener('click', e => {\n  if (e.target.id == 'buy_popup_overlay') buy_close()\n  const id = e.target.id.split('-')\n  if (id[0] == 'buy_cfrm') {\n    const sellers = []\n    let a = document.getElementById('buy_amount').value\n    let r = 0\n    for (let i = 0; a > 0; i++) {\n      if (a >= data.buy_cache[i].for_sale) {\n        r += data.buy_cache[i].price * data.buy_cache[i].for_sale\n        a -= data.buy_cache[i].for_sale\n        sellers.push({ seller: data.buy_cache[i].owner, buy_amount: data.buy_cache[i].for_sale })\n      } else {\n        r += data.buy_cache[i].price * a\n        sellers.push({ seller: data.buy_cache[i].owner, buy_amount: a })\n        a = 0\n      }\n    }\n    token_buy(id[1], r, sellers)\n  }\n})\ndocument.addEventListener('input', e => {\n  if (e.target.id == 'buy_amount') {\n    let a = e.target.value\n    let r = 0\n    for (let i = 0; a > 0; i++) {\n      if (a >= data.buy_cache[i].for_sale) {\n        r += data.buy_cache[i].price * data.buy_cache[i].for_sale\n        a -= data.buy_cache[i].for_sale\n      } else {\n        r += data.buy_cache[i].price * a\n        a = 0\n      }\n    }\n    document.getElementById('buy_cost').innerHTML = `Total price: ${r / 1000000}tz`\n    document.getElementById('buy_samt').innerHTML = `Selected amount: ${e.target.value}${e.target.value == e.target.max ? '(max)' : ''}`\n  }\n  if (e.target.id == 'sort') {\n    console.log(e.target.value)\n    if (e.target.value == 'new') {\n      main_start()\n    }\n    if (e.target.value == 'pop') {\n      main_start((a, b) => b.owners_amount - a.owners_amount)\n    }\n    if (e.target.value == 'chp') {\n      main_start((a, b) => a.min_price - b.min_price)\n    }\n    if (e.target.value == 'exp') {\n      main_start((a, b) => {\n        if (a.min_price == Infinity && b.min_price == Infinity) return 0\n        if (a.min_price == Infinity) return 1\n        if (b.min_price == Infinity) return -1\n        return b.min_price - a.min_price\n      })\n    }\n    if (e.target.value == 'old') {\n      main_start((a, b) => a.cnfrm_at - b.cnfrm_at)\n    }\n  }\n})\n"],"names":["_taquito","require","_beaconWallet","Tezos","TezosToolkit","rpc_addr","Wallet","BeaconWallet","name","setWalletProvider","contract","at","contract_addr","then","storage","assign_data","check_wallet","document","getElementById","style","display","data_loaded","main_start","catch","error","console","log","JSON","stringify","async","activeAccount","client","getActiveAccount","user_addr","address","innerHTML","connect_wallet","permissions","requestPermissions","network","type","rpcUrl","lastChild","remove","disconnect_wallet","clearActiveAccount","data","tokens","owners","s_key","value","ledger","valueMap","key","parse","token_id","Number","owner","count","for_sale","price","push","value1","token","id","slice","amount","state","cnfrm_at","Date","crted_at","text_color","c_t","b","g","r","back_color","c_b","image","content","split","reduce","a","c","min_price","filter","Infinity","owners_amount","length","sort","dom_loaded","t","creator","toGMTString","buy_open","buy_cache","max_amount","account_link","alien_link","buy_close","undefined","addEventListener","e","target","sellers","i","seller","buy_amount","pay","disabled","wallet","methods","token_buy","send","mutez","title","max"],"version":3,"file":"index.2bff529b.js.map"}